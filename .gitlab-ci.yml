stages:
  - trigger
  - deploy

trigger-PatientsData:
  stage: trigger
  trigger:
    include: k8s/PatientsData/.gitlab-ci.yml
    strategy: depend
  rules:
    - changes:
        - k8s/PatientsData/**/*

trigger-AppointmentsData:
  stage: trigger
  trigger:
    include: k8s/AppointmentsData/.gitlab-ci.yml
    strategy: depend
  rules:
    - changes:
        - k8s/AppointmentsData/**/*

trigger-DoctorsApplicationMicroservice:
  stage: trigger
  trigger:
    include: k8s/DoctorsApplicationMicroservice/.gitlab-ci.yml
    strategy: depend
  rules:
    - changes:
        - k8s/DoctorsApplicationMicroservice/**/*

trigger-DoctorsWebApp:
  stage: trigger
  trigger:
    include: k8s/WebApp/.gitlab-ci.yml
    strategy: depend
  rules:
    - changes:
        - k8s/PatientWebApp/**/*

deploy:
  stage: deploy
  tags:
    - all
  only:
    - master
  script:
    - echo "test"

